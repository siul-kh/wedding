<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="format-detection" content="telephone=no">
  <title>2025년 11월 1일 목지선 ♥︎ 김기환</title>

  <!-- 폰트 프리로드(선택) -->
  <link rel="preload" href="fonts/GowunBatang-Regular.woff2?v=1" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="fonts/GowunBatang-Bold.woff2?v=1" as="font" type="font/woff2" crossorigin>

  <style>
    /* ===== 폰트 ===== */
    @font-face{
      font-family:'GowunBatang';
      src:url('fonts/GowunBatang-Regular.woff2?v=1') format('woff2'),
          url('fonts/GowunBatang-Regular.ttf?v=1') format('truetype');
      font-weight:400; font-style:normal; font-display:swap;
    }
    @font-face{
      font-family:'GowunBatang';
      src:url('fonts/GowunBatang-Bold.woff2?v=1') format('woff2'),
          url('fonts/GowunBatang-Bold.ttf?v=1') format('truetype');
      font-weight:700; font-style:normal; font-display:swap;
    }

    :root{
      --maxw:414px;
      --ink:#585353;
      --accent:#7b9155;
      --hint:#9d9b9b;
      --thin:#e5e5e5;
      --heart-gap:8px;
      --thumb-gap:6px;
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0; background:#fff; color:var(--ink);
      font-family:'GowunBatang', ui-serif, system-ui, serif;
      font-size:12pt; line-height:1.8;
      display:flex; justify-content:center;
    }
    .container{width:100%; max-width:var(--maxw)}
    section{margin:0; background:#fff}
    .pad{padding:24px 16px}
    .center{text-align:center}
    .thin{height:1px; background:var(--thin); margin:16px 0}
    .thin-70{ width:70%; margin:16px auto; }

    /* 이미지 공통 */
    img{display:block; height:auto;}
    img:not(.img-original){ width:100%; }
    .img-original{ display:block; width:auto !important; height:auto !important; margin:0 auto; }

    /* 시 */
    .poem{text-align:center}
    .poem p{margin:8px 0}
    .poem .big{font-size:14pt; color:#585353; font-weight:700}
    .poem .big.tight{ line-height:0.9; margin:4px 0; }
    .poem .big + .big{ margin-top:12px; }
    .poem .normal{font-size:12pt; color:#585353}
    .after-heart{ margin-top:var(--heart-gap)!important; }
    .poem .go-title{ font-size:14pt; }

    /* ===== 달력 ===== */
    .cal-title{
      font-family:'GowunBatang',serif; font-weight:700;
      font-size:16pt; color:#585353; text-align:center; margin:6px 0;
    }
    .cal-sub{
      text-align:center; font-family:'GowunBatang',serif; font-weight:400;
      font-size:12pt; color:#585353; margin:3px 0 4px;
    }
    .cal-msg{
      text-align:center; font-family:'GowunBatang',serif; font-weight:400;
      font-size:12pt; color:#585353; margin:4px 0 7px;
    }
    .cal-msg .dleft{ color:var(--accent); font-weight:700; }

    .calendar{ width:70%; margin:0 auto; padding:0 4px; }
    .cal-head, .cal-grid{ display:grid; grid-template-columns:repeat(7,1fr); gap:6px; }
    .cal-head div{ text-align:center; font-size:12pt; color:#585353; letter-spacing:.04em; padding:4px 0; }
    .cal-cell{
      aspect-ratio:1/1; display:flex; align-items:center; justify-content:center;
      font-size:12pt; color:#585353;
    }
    .cal-cell .dot{
      display:inline-grid; place-items:center;
      width:28px; height:28px; border-radius:50%;
      background:#7b9155; color:#fff !important; font-weight:700;
    }
    @media (min-width:480px){
      .cal-cell .dot{ width:32px; height:32px; }
    }
    .cal-head div:nth-child(1){ color:#ff6b9c; }
    .cal-head div:nth-child(7){ color:#6dafff; }
    .cal-grid .cal-cell:nth-child(7n+1){ color:#ff6b9c; }
    .cal-grid .cal-cell:nth-child(7n){   color:#6dafff; }

    /* ===== 오시는 길 ===== */
    .go-title {
      font-family: 'GowunBatang', serif;
      font-weight: 700;
      font-size: 16pt;
      color: #585353;
      text-align: center;
    }
    .map { margin: 1.5em 0; }
    .map iframe {
      width: 100%;
      aspect-ratio: 1 / 1;
      border: 0;
      display: block;
      margin: 0 auto;
    }
    .go-name { font-family:'GowunBatang',serif; font-weight:700; font-size:14pt; color:#585353; text-align:center; }
    .go-addr { font-family:'GowunBatang',serif; font-weight:400; font-size:14pt; color:#585353; text-align:center; margin-bottom:13px; }
    .go-info {
      font-family:'GowunBatang',serif; font-weight:400; font-size:12pt;
      color:#9d9b9b; /* 요청 색상 */
      text-align:center; line-height:2.0; margin-top:0;
    }

    /* 네비 앱 버튼 (요청: 12pt 고정) */
    .nav-apps { display:grid; grid-template-columns:1fr 1fr 1fr; gap:8px; margin: 2em 0; }
    .nav-btn {
      display:inline-flex; align-items:center; justify-content:center; gap:.5em;
      padding: clamp(6px, 1.5vw, 10px) clamp(8px, 2vw, 12px);
      font-family:'GowunBatang',serif;
      font-size: 12pt; /* ← 수정 */
      color:#585353; text-decoration:none;
      background:#fff; border:1px solid #e5e5e5; border-radius:10px; cursor:pointer;
      white-space:nowrap; flex-wrap:nowrap; max-width:100%;
    }
    .nav-btn img{ height:1em; width:auto; display:inline-block; }

    /* ===== 갤러리 ===== */
    .gallery{padding:16px}
    .gallery .section-title{
      font-family:'GowunBatang',serif; font-weight:700;
      font-size:16pt; color:#585353; text-align:center; margin:8px 0;
    }
    .gallery .heart-top{ margin:0 auto 6px; }

    .hero-photo{
      position:relative; overflow:hidden; width:100%; aspect-ratio:4/6;
      background:#f7f7f7; touch-action:pan-y; cursor:grab;
    }
    /* 슬라이드 레이어/버튼 z-index 보정 */
    .hero-photo .slide{
      position:absolute; inset:0; width:100%; height:100%;
      object-fit:cover; display:block;
      will-change:transform;
      transform:translateX(0);
      z-index:1;
      user-select:none; -webkit-user-drag:none;
    }
    .hero-arrow{
      position:absolute; top:50%; transform:translateY(-50%);
      background:transparent; border:none; cursor:pointer; line-height:1;
      padding:0;
      z-index:2; /* 버튼이 위로 올라오게 */
    }
    .hero-arrow.prev{ left:4px; }
    .hero-arrow.next{ right:4px; }
    .hero-arrow img{ display:block; }

    .thumbs5{ display:grid; grid-template-columns:repeat(5,1fr); gap:var(--thumb-gap); width:100%;
      margin-block:var(--thumb-gap); }
    .thumbs5 .thumb{
      padding:0; border:none;
      background:#fff; cursor:pointer; overflow:hidden;
      aspect-ratio:1/1; display:block;
    }
    .thumbs5 .thumb img{ width:100%; height:100%; object-fit:cover; display:block; }
    .more-tri{ display:block; margin:10px auto 0; background:transparent; border:none; cursor:pointer; }
    .more-tri img{ display:block; }
    .thumbs-more[hidden]{ display:none; }

    /* ===== 방명록 섹션 ===== */
    #guestbook .gb-title{
      font-family:'GowunBatang',serif; font-weight:700; font-size:16pt; color:#585353; text-align:center; margin:8px 0 14px;
    }
    .gb-list{ display:grid; gap:12px; }

    /* 카드 폭 100% (작성폼+목록 공통) */
    .gb-card{
      width:100%; margin:0 auto; background:#fff;
      border:1px solid var(--thin); border-radius:12px; padding:12px;
    }
    .gb-row{ display:flex; align-items:flex-start; justify-content:space-between; gap:8px; }
    .gb-name{ font-family:'GowunBatang',serif; font-weight:700; font-size:10pt; color:#585353; }
    .gb-date{ font-family:'GowunBatang',serif; font-weight:400; font-size:10pt; color:#9d9b9b; }
    .gb-msg{ margin-top:6px; font-family:'GowunBatang',serif; font-weight:400; font-size:10pt; color:#585353; white-space:pre-wrap; word-break:break-word; }
    .gb-actions{ margin-top:6px; text-align:right; }
    .gb-del{ font:inherit; font-size:9pt; color:#9d9b9b; background:transparent; border:1px solid var(--thin); border-radius:8px; padding:3px 8px; cursor:pointer; }

    .gb-pager{ display:flex; align-items:center; justify-content:center; gap:6px; margin-top:12px; flex-wrap:wrap; }
    .gb-pager .arrow{
      border:1px solid var(--thin); background:#fff; color:#585353; font:inherit; padding:6px 10px; border-radius:8px; cursor:pointer;
    }
    .gb-pages{ display:flex; gap:6px; }
    .gb-pagebtn{
      border:none; background:transparent;
      color:#9d9b9b;
      font-family:'GowunBatang',serif; font-weight:400; font-size:10pt;
      padding:6px 10px; border-radius:8px; cursor:pointer;
    }
    .gb-pagebtn[aria-current="true"]{
      color:#585353; font-weight:700;
    }

    /* ===== 작성 폼(카드와 동일 룩) ===== */
    .gb-input{
      flex:1; min-width:0;
      font-family:'GowunBatang',serif; font-size:10pt; color:#585353;
      background:#fff; border:1px solid var(--thin); border-radius:8px; padding:6px 8px;
    }
    .gb-textarea{
      width:100%;
      font-family:'GowunBatang',serif; font-size:10pt; color:#585353;
      background:#fff; border:1px solid var(--thin); border-radius:8px; padding:6px 8px;
      resize:vertical;
    }
    .gb-write{
      display:inline-block; background:#fff; border:1px solid var(--thin); color:#585353;
      font-family:'GowunBatang',serif; font-weight:400; font-size:12pt; padding:8px 14px; border-radius:10px; cursor:pointer;
    }
    /* 요청: 방명록 작성 버튼만 스타일 변경 */
    #gbSubmit{
      font-size:10pt !important;
      color:#9d9b9b !important;
      font-weight:400 !important; /* Regular */
    }
    /* 요청: 내용 칸을 위 칸들과 더 가깝게 */
    #gbForm .gb-msg{ margin-top:4px; }

    /* 복사/삭제 모달 공통 스타일 */
    .copy-modal .sheet{
      width:min(92vw, 360px); border-radius:14px; display:grid; grid-template-rows:1fr auto;
    }
    .copy-modal .body{
      display:grid; place-items:center; gap:14px;
      padding:24px 18px;
      font-family:'GowunBatang',serif; font-weight:400; color:#585353;
    }
    .copy-ok{
      font-family:'GowunBatang',serif; font-size:10pt;
      padding:8px 14px; border-radius:10px;
      background:transparent; color:#585353; border:1px solid var(--thin);
      cursor:pointer;
    }

    /* ===== 모달 공통 ===== */
    .modal{
      position:fixed; inset:0; display:none;
      align-items:center; justify-content:center;
      background:rgba(0,0,0,.4); z-index:1000; padding:16px;
    }
    .modal.open{ display:flex; }
    .modal .sheet{ background:#fff; box-shadow:0 10px 30px rgba(0,0,0,.18); }

    /* ===== 카운트 블럭 (현상 유지) ===== */
    .when{ text-align:center; }
    .when .title{ font-size:14pt; color:var(--accent); font-weight:700; }
    .when .meta{ font-size:12pt; color:#585353; }
    .count-table{ margin:8px auto 0; border-collapse:separate; border-spacing:0; }
    .count-table th, .count-table td{ text-align:center; vertical-align:middle; padding:2px 0; }
    .count-labels th{ font-size:6pt; color:#hint; font-weight:400; }
    .count-values td{ font-size:14pt; color:#585353; font-weight:700; }
    .count-values .colon{ font-weight:700; font-size:12pt; }

    /* ===== 공유 버튼(하단, 현상 유지) ===== */
    .share-box{ text-align:center; padding:20px 16px 40px; }
    .share-cta{
      width:50%;
      display:inline-flex; align-items:center; justify-content:center; gap:4px;
      background:#fff; border:none; border-radius:10px;
      padding:10px 12px; cursor:pointer;
      font-family:'GowunBatang',serif; font-weight:400; font-size:12pt; color:#585353;
    }
    .share-cta img{ display:inline-block; margin:0 2px; }
    .share-cta span{ line-height:1; }

    /* ===== 아래에서 위로 애니메이션 (현상 유지) ===== */
    @keyframes riseIn{
      from{ transform:translateY(24px); opacity:0; }
      to{   transform:translateY(0);   opacity:1; }
    }
    .reveal-up{ opacity:0; transform:translateY(24px); will-change:transform,opacity; }
    .reveal-up.show{ animation:riseIn 1100ms cubic-bezier(.2,.7,.2,1) forwards; }
    @media (prefers-reduced-motion:reduce){
      .reveal-up{ opacity:1; transform:none; }
      .reveal-up.show{ animation:none; }
    }
  </style>
</head>
<body>
  <main class="container">

    <!-- 상단 이미지들 (현상 유지) -->
    <section><img src="images/1-photo.jpg?v=1" alt="상단 사진1"></section>
    <section><img src="images/2-typography.png?v=1" alt="타이포그래피"></section>

    <!-- 시 (현상 유지) -->
    <section class="pad poem" aria-label="시">
      <img src="images/heart.png" alt="하트" class="img-original">
      <div class="go-title after-heart">13년 전,<br>우리는 처음 만나 나무를 심었습니다.</div>

      <p class="normal" style="margin:30px 0 0 0;">
        여린 묘목에 흙과 물을 주고,<br>
        적당한 햇살이 비치기를,<br>
        적당한 바람이 불기를 바랐습니다.
      </p>

      <p class="normal" style="margin:30px 0 0 0;">
        맘과 달리 적당하지 않은 날이<br>
        많았는지도 모르겠습니다.
      </p>

      <p class="normal" style="margin:30px 0 0 0;">
        그 덕에 적당한 목질이 되어<br>
        이제는 제법 단단한 뿌리를 뻗고,<br>
        위로는 숱한 가지를 내어<br>
        그늘을 만들었습니다.
      </p>

      <p class="normal" style="margin:30px 0 0 0;">
        그 아래서 우리는<br>
        적당한 날들을 맞이하려 합니다.
      </p>
    </section>

    <section><img src="images/3-photo.jpg?v=1" alt="하단 사진"></section>

    <!-- 달력 -->
    <section class="pad" aria-label="달력">
      <img src="images/heart.png" alt="하트" class="img-original">
      <div class="cal-title after-heart">결혼합니다</div>
      <div class="cal-sub">2025년 11월 1일 토요일 오후 2시</div>
      <div id="weddingStatus" class="cal-msg">지선, 기환의 결혼식이 <span class="dleft">0일</span> 남았습니다.</div>
      <div class="thin thin-70"></div>
      <div class="calendar">
        <div class="cal-head">
          <div>일</div><div>월</div><div>화</div><div>수</div><div>목</div><div>금</div><div>토</div>
        </div>
        <div class="cal-grid">
          <div class="cal-cell"></div><div class="cal-cell"></div><div class="cal-cell"></div>
          <div class="cal-cell"></div><div class="cal-cell"></div><div class="cal-cell"></div>
          <div class="cal-cell"><span class="dot">1</span></div>
          <div class="cal-cell">2</div><div class="cal-cell">3</div><div class="cal-cell">4</div>
          <div class="cal-cell">5</div><div class="cal-cell">6</div><div class="cal-cell">7</div>
          <div class="cal-cell">8</div>
          <div class="cal-cell">9</div><div class="cal-cell">10</div><div class="cal-cell">11</div>
          <div class="cal-cell">12</div><div class="cal-cell">13</div><div class="cal-cell">14</div>
          <div class="cal-cell">15</div>
          <div class="cal-cell">16</div><div class="cal-cell">17</div><div class="cal-cell">18</div>
          <div class="cal-cell">19</div><div class="cal-cell">20</div><div class="cal-cell">21</div>
          <div class="cal-cell">22</div>
          <div class="cal-cell">23</div><div class="cal-cell">24</div><div class="cal-cell">25</div>
          <div class="cal-cell">26</div><div class="cal-cell">27</div><div class="cal-cell">28</div>
          <div class="cal-cell">29</div>
          <div class="cal-cell">30</div>
          <div class="cal-cell"></div><div class="cal-cell"></div><div class="cal-cell"></div>
          <div class="cal-cell"></div><div class="cal-cell"></div><div class="cal-cell"></div>
        </div>
      </div>
      <div class="thin thin-70"></div>
    </section>

    <!-- 카운트 1 (현상 유지) -->
    <section class="pad when">
      <div class="title">우리가 나무를 심은 날</div>
      <div class="meta">2012. 06. 09. SAT. 08:30, 남산원</div>
      <table class="count-table" id="pastTable">
        <colgroup><col><col><col><col><col><col><col></colgroup>
        <thead class="count-labels">
          <tr>
            <th>DAYS</th><th class="colon"></th>
            <th>HOUR</th><th class="colon"></th>
            <th>MIN</th><th class="colon"></th>
            <th>SEC</th>
          </tr>
        </thead>
        <tbody class="count-values">
          <tr>
            <td class="d"></td><td class="colon">:</td>
            <td class="h"></td><td class="colon">:</td>
            <td class="m"></td><td class="colon">:</td>
            <td class="s"></td>
          </tr>
        </tbody>
      </table>
    </section>

    <!-- 카운트 2 (현상 유지) -->
    <section class="pad when">
      <div class="title" id="fruitTitle">그 나무가 열매를 맺을 날</div>
      <div class="meta">2025. 11. 01. SAT. 14:00, 서울행정법원 융선당</div>
      <table class="count-table" id="futureTable">
        <colgroup><col><col><col><col><col><col><col></colgroup>
        <thead class="count-labels">
          <tr>
            <th>DAYS</th><th class="colon"></th>
            <th>HOUR</th><th class="colon"></th>
            <th>MIN</th><th class="colon"></th>
            <th>SEC</th>
          </tr>
        </thead>
        <tbody class="count-values">
          <tr>
            <td class="d"></td><td class="colon">:</td>
            <td class="h"></td><td class="colon">:</td>
            <td class="m"></td><td class="colon">:</td>
            <td class="s"></td>
          </tr>
        </tbody>
      </table>
    </section>

    <!-- 얇은 선: 결혼합니다 ↔ 오시는 길 (카운트 뒤에 배치) -->
    <div class="thin"></div>

    <!-- 오시는 길 -->
    <section class="pad" id="way">
      <img src="images/heart.png" alt="하트" class="img-original">
      <div class="go-title" style="margin-top:8px">오시는 길</div>

      <div class="map">
        <iframe
          title="서울가정행정법원 융선당"
          src="https://www.google.com/maps?q=%EC%84%9C%EC%9A%B8%EA%B0%80%EC%A0%95%ED%96%89%EC%A0%95%EB%B2%95%EC%9B%90%20%EC%9C%B5%EC%84%A0%EB%8B%B9&output=embed"
          loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>

      <div>
        <div class="go-name">📍서울행정법원 융선당</div>
        <div class="go-addr">서울시 서초구 강남대로 193(양재동 25-3)</div>
        <div class="go-info">
          3호선 • 신분당선 양재역 9번 출구 도보 3분 직진<br>
          16시까지 지하 3~4층 주차장 이용 가능<br>
          13시 30분부터 식사 가능<br>
        </div>
      </div>

      <div class="nav-apps">
        <a class="nav-btn" target="_blank" rel="noopener"
           href="https://map.naver.com/v5/search/%EC%84%9C%EC%9A%B8%ED%96%89%EC%A0%95%EB%B2%95%EC%9B%90%EC%9C%B5%EC%84%A0%EB%8B%B9%EC%98%88%EC%8B%9D%EC%9E%A5">
          <img src="images/navermap.png" alt="">네이버 지도
        </a>
        <a class="nav-btn" target="_blank" rel="noopener" href="https://tmap.life/c31c6940">
          <img src="images/tmap.png" alt="">티맵
        </a>
        <a class="nav-btn" target="_blank" rel="noopener"
           href="https://map.kakao.com/?q=서울행정법원%20융선당예식장">
          <img src="images/kakaomap.png" alt="">카카오맵
        </a>
      </div>
    </section>

    <!-- 얇은 선: 오시는 길 ↔ 갤러리 -->
    <div class="thin"></div>

    <!-- 갤러리 -->
    <section class="gallery pad" id="gallery">
      <img src="images/heart.png" alt="하트" class="img-original heart-top">
      <div class="section-title">갤러리</div>

      <div class="hero-photo" id="heroZone">
        <button id="heroPrev" class="hero-arrow prev" aria-label="이전">
          <img src="images/left.png" alt="">
        </button>
        <button id="heroNext" class="hero-arrow next" aria-label="다음">
          <img src="images/right.png" alt="">
        </button>
      </div>

      <div class="thumbs5" id="thumbsTop"></div>
      <div class="thumbs5 thumbs-more" id="thumbsMore" hidden></div>
      <button id="thumbsMoreBtn" class="more-tri" aria-expanded="false" aria-controls="thumbsMore">
        <img id="thumbsMoreIcon" src="images/down.png" alt="">
      </button>
    </section>

    <div class="thin"></div>

    <!-- ===== 방명록 ===== -->
    <section class="pad" id="guestbook">
      <img src="images/heart.png" alt="하트" class="img-original">
      <div class="gb-title after-heart">방명록</div>

      <!-- 작성 폼 -->
      <div class="gb-card" id="gbForm">
        <div class="gb-row">
          <input id="gbName" class="gb-input" placeholder="이름"/>
          <input id="gbPass" class="gb-input" placeholder="비밀번호" type="password"/>
        </div>
        <div class="gb-msg" style="margin-top:4px;">
          <textarea id="gbMsg" class="gb-textarea" rows="4" placeholder="내용을 입력하세요."></textarea>
        </div>
        <div class="gb-actions">
          <button id="gbSubmit" class="gb-write">작성하기</button>
        </div>
      </div>

      <!-- 목록 -->
      <div id="gbList" class="gb-list" style="margin-top:12px;"></div>

      <div class="gb-pager">
        <button id="gbPrevWindow" class="arrow" hidden>◀</button>
        <div id="gbPages" class="gb-pages"></div>
        <button id="gbNextWindow" class="arrow" hidden>▶</button>
      </div>
    </section>

    <div class="thin"></div>

    <!-- 마음 전하실 곳 (원본 스타일 유지) -->
    <section class="pad" id="accounts">
      <img src="images/heart.png" alt="하트" class="img-original">
      <div class="acc-title after-heart">마음 전하실 곳</div>

      <!-- 신랑 측 -->
      <table class="acc-table acc-group" id="accGroomTbl">
        <thead>
          <tr><th colspan="2"><button class="acc-heading" type="button" aria-expanded="false">신랑 측</button></th></tr>
        </thead>
        <tbody hidden>
          <tr>
            <td class="acc-line">김기환 국민은행 90513110424</td>
            <td class="copy-col"><button class="copy-mini" data-copy="국민은행 90513110424 (김기환)">복사</button></td>
          </tr>
          <tr>
            <td class="acc-line">김정호 국민은행 430502-93-118573</td>
            <td class="copy-col"><button class="copy-mini" data-copy="국민은행 430502-93-118573 (김정호)">복사</button></td>
          </tr>
          <tr>
            <td class="acc-line">이이순 우리은행 1002-038-271451</td>
            <td class="copy-col"><button class="copy-mini" data-copy="우리은행 1002-038-271451 (이이순)">복사</button></td>
          </tr>
        </tbody>
      </table>

      <div style="height:10px"></div>

      <!-- 신부 측 -->
      <table class="acc-table acc-group" id="accBrideTbl">
        <thead>
          <tr><th colspan="2"><button class="acc-heading" type="button" aria-expanded="false">신부 측</button></th></tr>
        </thead>
        <tbody hidden>
          <tr>
            <td class="acc-line">목지선 카카오뱅크 3333-22-7850739</td>
            <td class="copy-col"><button class="copy-mini" data-copy="카카오뱅크 3333-22-7850739 (목지선)">복사</button></td>
          </tr>
          <tr>
            <td class="acc-line">목승우 국민은행 659401-01-191168</td>
            <td class="copy-col"><button class="copy-mini" data-copy="국민은행 659401-01-191168 (목승우)">복사</button></td>
          </tr>
          <tr>
            <td class="acc-line">성미화 새마을금고 9002197239365</td>
            <td class="copy-col"><button class="copy-mini" data-copy="새마을금고 9002197239365 (성미화)">복사</button></td>
          </tr>
        </tbody>
      </table>
    </section>

    <!-- 삭제 확인 모달 -->
    <div id="delModal" class="modal copy-modal" aria-hidden="true">
      <div class="sheet">
        <div class="body center">
          <div>삭제 비밀번호를 입력하세요.</div>
          <input id="delPass" class="gb-input" type="password" placeholder="비밀번호">
          <div id="delError" style="display:none; color:#d00; font-size:10pt;">비밀번호가 틀렸습니다.</div>
          <div style="display:flex; gap:10px;">
            <button id="delOk" class="copy-ok">삭제</button>
            <button id="delCancel" class="copy-ok">취소</button>
          </div>
        </div>
      </div>
    </div>

    <!-- 복사 완료 모달 (현상 유지) -->
    <div id="copyModal" class="modal copy-modal" aria-hidden="true">
      <div class="sheet">
        <div class="body center">
          <div>복사가 완료되었습니다.</div>
          <button id="copyOk" class="copy-ok">확인</button>
        </div>
      </div>
    </div>

    <!-- 얇은 선: 마음 전하실 곳 ↔ 공유 -->
    <div class="thin"></div>

    <!-- 공유 -->
    <section class="share-box">
      <button id="shareCta" class="share-cta">
        <img src="images/message.png" alt="" class="img-original">
        <span>청첩장 공유하기</span>
      </button>
    </section>

  </main>

  <script>
    /* ===== 모달 유틸 ===== */
    function openModal(el){ if(!el) return; el.classList.add('open'); el.setAttribute('aria-hidden','false'); }
    function closeModal(el){ if(!el) return; el.classList.remove('open'); el.setAttribute('aria-hidden','true'); }

    /* ===== 카운트 (원본 유지) ===== */
    function setSecondRowWidths(tbody){
      const row = tbody.querySelector('tr');
      if(!row) return;
      const cells = row.children;
      if(!cells || cells.length !== 7) return;
      const dLen = (cells[0].textContent || '').length || 1;
      cells[0].style.width = dLen + 'ch';
      for(let i=1;i<cells.length;i++){ cells[i].style.width = '2ch'; }
    }
    function fillCountRow(tbody, d,h,m,s){
      const cells = tbody.querySelector('tr')?.children;
      if(!cells || cells.length !== 7) return;
      cells[0].textContent = String(d);
      cells[2].textContent = String(h).padStart(2,'0');
      cells[4].textContent = String(m).padStart(2,'0');
      cells[6].textContent = String(s).padStart(2,'0');
      setSecondRowWidths(tbody);
    }
    document.addEventListener('DOMContentLoaded', function(){
      const pastTable   = document.getElementById('pastTable');
      const futureTable = document.getElementById('futureTable');
      const pastBody    = pastTable?.querySelector('tbody');
      const futureBody  = futureTable?.querySelector('tbody');

      const past   = new Date('2012-06-09T08:30:00+09:00');
      const future = new Date('2025-11-01T14:00:00+09:00');

      function tick(){
        const now = new Date();

        let t1 = Math.max(0, now - past);
        const d1 = Math.floor(t1 / 86400000); t1 -= d1 * 86400000;
        const h1 = Math.floor(t1 / 3600000);  t1 -= h1 * 3600000;
        const m1 = Math.floor(t1 / 60000);    t1 -= m1 * 60000;
        const s1 = Math.floor(t1 / 1000);
        if(pastBody){ fillCountRow(pastBody, d1,h1,m1,s1); }

        let t2 = future - now, d2,h2,m2,s2;
        if (t2 >= 0){
          let rem = t2;
          d2 = Math.floor(rem / 86400000); rem -= d2 * 86400000;
          h2 = Math.floor(rem / 3600000);  rem -= h2 * 3600000;
          m2 = Math.floor(rem / 60000);    rem -= m2 * 60000;
          s2 = Math.floor(rem / 1000);
        } else {
          let passed = -t2;
          d2 = Math.floor(passed / 86400000); passed -= d2 * 86400000;
          h2 = Math.floor(passed / 3600000);  passed -= h2 * 3600000;
          m2 = Math.floor(passed / 60000);    passed -= m2 * 60000;
          s2 = Math.floor(passed / 1000);
        }
        if(futureBody){ fillCountRow(futureBody, d2,h2,m2,s2); }
      }
      tick();
      setInterval(tick, 1000);
    });

    /* ===== 달력 상태 문구 (현상 유지) ===== */
    (function(){
      const el = document.getElementById('weddingStatus');
      const fruitTitle = document.getElementById('fruitTitle');
      if(!el) return;
      function updateStatus(){
        const now = new Date();
        const weddingDate = new Date('2025-11-01T00:00:00+09:00');
        const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
        const msPerDay = 86400000;

        const diff = today - weddingDate;
        if (diff < 0){
          const daysLeft = Math.ceil((weddingDate - today)/msPerDay);
          el.innerHTML = `지선, 기환의 결혼식이 <span class="dleft">${daysLeft}일</span> 남았습니다.`;
          if(fruitTitle) fruitTitle.textContent = '그 나무가 열매를 맺을 날';
        } else if (diff === 0){
          el.textContent = `지선, 기환의 결혼식이 열리는 날입니다.`;
          if(fruitTitle) fruitTitle.textContent = '그 나무가 열매를 맺을 날';
        } else {
          const daysSince = Math.floor(diff/msPerDay);
          el.innerHTML = `지선, 기환이 결혼한지 <span class="dleft">${daysSince}일</span> 되었습니다.`;
          if(fruitTitle) fruitTitle.textContent = '그 나무가 열매를 맺은 날';
        }
      }
      updateStatus();
      setInterval(updateStatus, 3600000);
    })();

    /* ===== 갤러리: 랜덤 유지 + 슬라이드/드래그 애니메이션 + 이미지 버튼 ===== */
    (function(){
      const zone=document.getElementById('heroZone');
      const prev=document.getElementById('heroPrev');
      const next=document.getElementById('heroNext');
      const thumbsTop=document.getElementById('thumbsTop');
      const thumbsMore=document.getElementById('thumbsMore');
      const moreBtn=document.getElementById('thumbsMoreBtn');
      const moreIcon=document.getElementById('thumbsMoreIcon');
      if(!zone||!prev||!next||!thumbsTop||!thumbsMore||!moreBtn||!moreIcon) return;

      const GH = { owner:'', repo:'', ref:'main', dir:'images/pre-wedding snap' };
      if(!GH.owner || !GH.repo){
        const host = location.hostname;
        if(host.endsWith('github.io')){
          GH.owner = GH.owner || host.split('.')[0];
          const seg = location.pathname.replace(/^\/+/,'').split('/');
          GH.repo  = GH.repo || (seg[0] || (GH.owner + '.github.io'));
        }
      }

      function encPath(p){ return p.split('/').map(encodeURIComponent).join('/'); }
      function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]] } return a; }
      function makeThumb(src, i){
        const b=document.createElement('button');
        b.className='thumb';
        const im=document.createElement('img');
        im.src=src+'?v=1'; im.alt='썸네일';
        b.appendChild(im);
        b.addEventListener('click',()=>show(i,0,true));
        return b;
      }

      let list = [];
      let idx  = 0;
      let curImg = null;
      let animating = false;
      let drag = {active:false, startX:0, dx:0, dir:0, ghost:null};

      function width(){ return zone.getBoundingClientRect().width; }

      function mountInitial(src){
        curImg = document.createElement('img');
        curImg.className = 'slide';
        curImg.src = src+'?v=1';
        curImg.style.transform = 'translateX(0px)';
        zone.appendChild(curImg);
      }

      function createGhost(src){
        const g = document.createElement('img');
        g.className='slide';
        g.src=src+'?v=1';
        return g;
      }

      function show(newIndex, dir=0, instant=false){
        if(!list.length) return;
        newIndex=(newIndex+list.length)%list.length;
        if(!curImg){
          mountInitial(list[newIndex]);
          idx=newIndex;
          return;
        }
        if(animating) return;
        if(newIndex===idx && dir===0) return;

        const toLeft = dir>0;   // next
        const toRight= dir<0;   // prev

        const incoming = createGhost(list[newIndex]);
        const w = width();
        incoming.style.transform = `translateX(${toLeft? w : toRight? -w : 0}px)`;
        zone.appendChild(incoming);

        if(instant){
          zone.removeChild(curImg);
          curImg = incoming;
          curImg.style.transform = 'translateX(0px)';
          idx=newIndex;
          return;
        }

        animating = true;
        requestAnimationFrame(()=>{
          curImg.style.transition = 'transform 300ms ease';
          incoming.style.transition = 'transform 300ms ease';
          curImg.style.transform = `translateX(${toLeft? -w : w}px)`;
          incoming.style.transform = 'translateX(0px)';
          const done = ()=>{
            curImg.removeEventListener('transitionend', done);
            zone.removeChild(curImg);
            curImg = incoming;
            curImg.style.transition = '';
            animating=false;
          };
          curImg.addEventListener('transitionend', done, {once:true});
          idx=newIndex;
        });
      }

      // 드래그
      zone.addEventListener('pointerdown',(e)=>{
        if(!list.length || animating) return;
        drag.active=true; drag.startX=e.clientX; drag.dx=0; drag.dir=0;
        zone.setPointerCapture(e.pointerId);
        zone.style.cursor='grabbing';
      });
      zone.addEventListener('pointermove',(e)=>{
        if(!drag.active || !curImg) return;
        drag.dx = e.clientX - drag.startX;
        const w = width();
        const dir = drag.dx<0 ? 1 : -1; // 좌로 끌면 next(+1), 우로 끌면 prev(-1)
        if(dir !== drag.dir){
          if(drag.ghost && drag.ghost.parentNode) zone.removeChild(drag.ghost);
          const nextIndex = (idx + dir + list.length)%list.length;
          drag.ghost = createGhost(list[nextIndex]);
          drag.ghost.style.transform = `translateX(${dir>0? w : -w}px)`;
          zone.appendChild(drag.ghost);
          drag.dir = dir;
        }
        if(drag.ghost){
          curImg.style.transform = `translateX(${drag.dx}px)`;
          drag.ghost.style.transform = `translateX(${(drag.dir>0? w : -w) + drag.dx}px)`;
        }
      });
      function endDrag(){
        if(!drag.active){ return; }
        zone.style.cursor='grab';
        const w = width();
        const threshold = Math.min(120, w*0.25);
        if(Math.abs(drag.dx) > threshold && drag.dir !== 0){
          animating = true;
          curImg.style.transition = 'transform 250ms ease';
          drag.ghost.style.transition = 'transform 250ms ease';
          curImg.style.transform = `translateX(${drag.dir>0? -w : w}px)`;
          drag.ghost.style.transform = 'translateX(0px)';
          const old = curImg, incoming = drag.ghost, newIndex = (idx + drag.dir + list.length)%list.length;
          old.addEventListener('transitionend', ()=>{
            if(old.parentNode) old.parentNode.removeChild(old);
            incoming.style.transition='';
            curImg = incoming;
            idx = newIndex;
            animating=false;
          }, {once:true});
        }else{
          curImg.style.transition = 'transform 200ms ease';
          curImg.style.transform = 'translateX(0px)';
          if(drag.ghost){
            drag.ghost.style.transition='transform 200ms ease';
            drag.ghost.style.transform = `translateX(${drag.dir>0? w : -w}px)`;
            drag.ghost.addEventListener('transitionend', ()=>{
              if(drag.ghost && drag.ghost.parentNode) drag.ghost.parentNode.removeChild(drag.ghost);
            }, {once:true});
          }
        }
        drag.active=false; drag.dx=0; drag.dir=0; drag.ghost=null;
      }
      zone.addEventListener('pointerup', endDrag);
      zone.addEventListener('pointercancel', endDrag);
      zone.addEventListener('dragstart', e=>e.preventDefault());

      prev.addEventListener('click', ()=> show(idx-1, -1));
      next.addEventListener('click', ()=> show(idx+1, +1));

      function render(){
        const first25 = list.slice(0,25);
        const next25  = list.slice(25,50);

        thumbsTop.innerHTML=''; thumbsMore.innerHTML='';
        first25.forEach((src,i)=>thumbsTop.appendChild(makeThumb(src,i)));
        next25.forEach((src,i)=>thumbsMore.appendChild(makeThumb(src,i+25)));

        show(0,0,true);

        // 더보기 버튼 토글 (항상 동작하도록 수정)
        moreBtn.hidden = next25.length===0;
        moreBtn.setAttribute('aria-expanded','false');
        thumbsMore.hidden = true;
        moreIcon.src = 'images/down.png';
        moreBtn.addEventListener('click', ()=>{
          const willOpen = thumbsMore.hidden;
          thumbsMore.hidden = !willOpen;
          moreBtn.setAttribute('aria-expanded', String(willOpen));
          moreIcon.src = willOpen ? 'images/up.png' : 'images/down.png';
        });
      }

      async function loadFromGitHub(){
        try{
          if(!GH.owner || !GH.repo) throw new Error('GitHub 저장소 정보를 설정하세요.');
          const api = `https://api.github.com/repos/${encodeURIComponent(GH.owner)}/${encodeURIComponent(GH.repo)}/contents/${encPath(GH.dir)}?ref=${encodeURIComponent(GH.ref)}`;
          const res = await fetch(api, { headers:{ 'Accept':'application/vnd.github+json' } });
          if(!res.ok) throw new Error('GitHub API 요청 실패: ' + res.status);
          const items = await res.json();
          const exts = /\.(jpe?g|png|webp|gif|avif)$/i;
          const basePath = encPath(GH.dir) + '/';
          const files = items.filter(it=>it.type==='file' && exts.test(it.name))
                             .map(it => basePath + encodeURIComponent(it.name));
          // 랜덤 유지
          return shuffle(files).slice(0,50);
        }catch(e){
          console.warn(e);
          return [];
        }
      }

      (async function init(){
        list = await loadFromGitHub();
        render();
      })();
    })();

    /* ===== 방명록: JSONP(list) + no-cors POST(create/delete) ===== */
    (function(){
      const GUESTBOOK_API = 'https://script.google.com/macros/s/AKfycbxp2VAXos-C8Z3pJOYQiV9JDAKuF8zEf9uMIfGulxWf9KegrhwtQ8KTLh7mMronT9HK/exec';

      // JSONP helper
      function jsonp(url){
        return new Promise((resolve, reject)=>{
          const cb = '__gb_cb_' + Date.now() + Math.random().toString(36).slice(2);
          window[cb] = (data)=>{ resolve(data); cleanup(); };
          function cleanup(){ try{ delete window[cb]; }catch{} if(s && s.parentNode) s.parentNode.removeChild(s); }
          const s = document.createElement('script');
          s.src = url + (url.includes('?') ? '&' : '?') + 'callback=' + cb + '&_=' + Date.now();
          s.onerror = ()=>{ cleanup(); reject(new Error('JSONP failed')); };
          document.head.appendChild(s);
        });
      }

      const PAGE_SIZE = 5;

      const listEl = document.getElementById('gbList');
      const prevWindowBtn = document.getElementById('gbPrevWindow');
      const nextWindowBtn = document.getElementById('gbNextWindow');
      const pagesWrap = document.getElementById('gbPages');

      // 작성 폼
      const nameEl = document.getElementById('gbName');
      const passEl = document.getElementById('gbPass');
      const msgEl  = document.getElementById('gbMsg');
      const submitBtn = document.getElementById('gbSubmit');

      // 삭제 모달
      const delModal = document.getElementById('delModal');
      const delPass  = document.getElementById('delPass');
      const delOk    = document.getElementById('delOk');
      const delCancel= document.getElementById('delCancel');
      const delError = document.getElementById('delError');
      let targetDeleteId = null;

      let data = [];
      let page = 1;
      let winStart = 1;

      function fmtDate(iso){
        try{
          const d = iso ? new Date(iso) : new Date();
          return d.toLocaleDateString('ko-KR');
        }catch(e){ return iso || ''; }
      }
      function escapeHtml(s){
        return (s||'').replace(/[&<>"']/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[c]));
      }

      function renderList(){
        const totalPages = Math.max(1, Math.ceil(data.length / PAGE_SIZE));
        page = Math.min(Math.max(1, page), totalPages);

        listEl.innerHTML = '';
        const start = (page-1)*PAGE_SIZE;
        data.slice(start, start+PAGE_SIZE).forEach(item=>{
          const card = document.createElement('div');
          card.className = 'gb-card';
          card.innerHTML = `
            <div class="gb-row">
              <div class="gb-name">${escapeHtml(item.name)}</div>
              <div class="gb-date">${escapeHtml(fmtDate(item.date))}</div>
            </div>
            <div class="gb-msg">${escapeHtml(item.msg)}</div>
            <div class="gb-actions">
              <button class="gb-del" data-id="${item.id}">삭제</button>
            </div>
          `;
          listEl.appendChild(card);
        });

        renderPager(totalPages);
      }

      function renderPager(totalPages){
        if(page < winStart) winStart = Math.floor((page-1)/5)*5 + 1;
        if(page > winStart+4) winStart = Math.floor((page-1)/5)*5 + 1;

        const end = Math.min(winStart + 4, totalPages);

        pagesWrap.innerHTML = '';
        for(let p=winStart; p<=end; p++){
          const b = document.createElement('button');
          b.className = 'gb-pagebtn';
          b.textContent = String(p);
          b.setAttribute('aria-current', p===page ? 'true' : 'false');
          b.addEventListener('click', ()=>{ page = p; renderList(); });
          pagesWrap.appendChild(b);
        }

        prevWindowBtn.hidden = (winStart <= 1);
        nextWindowBtn.hidden = (end >= totalPages);
      }

      prevWindowBtn.addEventListener('click', ()=>{
        winStart = Math.max(1, winStart - 5);
        page = winStart;
        renderList();
      });
      nextWindowBtn.addEventListener('click', ()=>{
        const totalPages = Math.max(1, Math.ceil(data.length / PAGE_SIZE));
        const newStart = winStart + 5;
        if(newStart <= totalPages){
          winStart = newStart;
          page = winStart;
          renderList();
        }
      });

      // 작성(폼) → 저장
      submitBtn.addEventListener('click', async ()=>{
        const name = (nameEl.value||'').trim();
        const pass = (passEl.value||'').trim();
        const msg  = (msgEl.value||'').trim();
        if(!name || !pass || !msg){
          alert('내용을 모두 입력하세요.');
          return;
        }
        const passhash = await sha256(pass);
        const entry = {
          id: 'id_' + Date.now() + '_' + Math.random().toString(36).slice(2,7),
          name, msg, passhash, date: new Date().toISOString()
        };
        const ok = await apiCreate(entry);
        if(!ok){ alert('저장에 실패했습니다. 잠시 후 다시 시도해주세요.'); return; }
        nameEl.value=''; passEl.value=''; msgEl.value='';
        await load(); page = 1; winStart = 1; renderList();
      });

      // 삭제 버튼 → 모달
      document.addEventListener('click', (e)=>{
        const btn = e.target.closest('.gb-del');
        if(!btn) return;
        targetDeleteId = btn.getAttribute('data-id');
        delPass.value=''; delError.style.display='none';
        openModal(delModal);
      });
      delCancel.addEventListener('click', ()=> closeModal(delModal));
      delOk.addEventListener('click', async ()=>{
        const pw = delPass.value || '';
        if(!pw) return;
        const passhash = await sha256(pw);
        const ok = await apiDelete(targetDeleteId, passhash);
        if(!ok){
          delError.style.display='block'; // 비밀번호 틀림
          return;
        }
        closeModal(delModal);
        await load();
        const totalPages = Math.max(1, Math.ceil(data.length / PAGE_SIZE));
        if(page > totalPages) page = totalPages;
        if(page < winStart) winStart = Math.floor((page-1)/5)*5 + 1;
        renderList();
      });

      // ==== API 래퍼 ====
      async function apiList(){
        try{
          return await jsonp(GUESTBOOK_API + '?method=list');
        }catch(e){
          console.warn(e); return [];
        }
      }
      async function apiCreate(entry){
        try{
          await fetch(GUESTBOOK_API, {
            method: 'POST',
            mode: 'no-cors',
            body: JSON.stringify({ method:'create', entry })
          });
          return true;
        }catch(e){
          console.warn(e); return false;
        }
      }
      async function apiDelete(id, passhash){
        try{
          await fetch(GUESTBOOK_API, {
            method: 'POST',
            mode: 'no-cors',
            body: JSON.stringify({ method:'delete', id, passhash })
          });
          return true;
        }catch(e){
          console.warn(e); return false;
        }
      }

      async function load(){ data = await apiList(); }

      async function sha256(str){
        const buf = await crypto.subtle.digest('SHA-256', new TextEncoder().encode(str));
        return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,'0')).join('');
      }

      (async function init(){
        await load();
        renderList();
      })();
    })();

    /* 마음 전하실 곳: 토글 + 복사 팝업 (현상 유지) */
    (function(){
      document.querySelectorAll('.acc-group').forEach(tbl=>{
        const btn = tbl.querySelector('.acc-heading');
        const body = tbl.querySelector('tbody');
        if(!btn || !body) return;
        btn.addEventListener('click', ()=>{
          const open = btn.getAttribute('aria-expanded') === 'true';
          btn.setAttribute('aria-expanded', String(!open));
          body.hidden = open;
        });
      });

      function defangTel(str){
        return str
          .replace(/\d/g, d => d + '\u200B')
          .replace(/-/g, '-' + '\u200B');
      }
      document.querySelectorAll('.acc-line').forEach(td=>{
        const raw = td.textContent;
        td.innerHTML = raw.replace(/[0-9-]{3,}/g, m => defangTel(m));
      });

      const copyModal=document.getElementById('copyModal');
      const copyOk=document.getElementById('copyOk');
      if(copyOk) copyOk.addEventListener('click',()=>closeModal(copyModal));

      document.addEventListener('click', (e)=>{
        const b=e.target.closest('.copy-mini');
        if(!b) return;
        const txt=b.getAttribute('data-copy')||'';
        if(navigator.clipboard){
          navigator.clipboard.writeText(txt).then(()=>openModal(copyModal));
        }else{
          const ta=document.createElement('textarea'); ta.value=txt; document.body.appendChild(ta);
          ta.select(); document.execCommand('copy'); document.body.removeChild(ta);
          openModal(copyModal);
        }
      });
    })();

    /* ===== 공유 (현상 유지) ===== */
    (function(){
      const btn=document.getElementById('shareCta');
      if(!btn) return;
      btn.addEventListener('click', ()=>{
        const data={ title:document.title, text:'초대장을 공유합니다', url:location.href };
        if(navigator.share){ navigator.share(data); }
        else { navigator.clipboard.writeText(location.href); alert('링크가 복사되었습니다. 원하는 앱에 붙여넣어 공유해주세요.'); }
      });
    })();

    /* ===== 아래에서 위로 애니메이션: .share-box 제외(현상 유지) ===== */
    (function(){
      const REDUCED = matchMedia('(prefers-reduced-motion: reduce)').matches;
      const all = Array.from(document.querySelectorAll('main > section, .thin'));
      const targets = all.filter(el => !el.classList.contains('share-box'));
      const share = document.querySelector('.share-box');

      targets.forEach(el => el.classList.add('reveal-up'));
      if (share) share.classList.add('show');

      if (REDUCED) { targets.forEach(el => el.classList.add('show')); return; }

      const io = new IntersectionObserver((entries)=>{
        entries.forEach(ent=>{
          if(ent.isIntersecting){
            ent.target.classList.add('show');
            io.unobserve(ent.target);
          }
        });
      }, { threshold: 0.15, rootMargin: '0px 0px -10% 0px' });

      targets.forEach(el => io.observe(el));
    })();
  </script>
</body>
</html>
