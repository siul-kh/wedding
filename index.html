<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>2025년 11월 1일 목지선 ♥︎ 김기환 결혼합니다</title>

  <!-- 폰트 프리로드(선택) -->
  <link rel="preload" href="fonts/GowunBatang-Regular.woff2?v=1" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="fonts/GowunBatang-Bold.woff2?v=1" as="font" type="font/woff2" crossorigin>

  <style>
    /* ===== 폰트 ===== */
    @font-face{
      font-family:'GowunBatang';
      src:url('fonts/GowunBatang-Regular.woff2?v=1') format('woff2'),
          url('fonts/GowunBatang-Regular.ttf?v=1') format('truetype');
      font-weight:400; font-style:normal; font-display:swap;
    }
    @font-face{
      font-family:'GowunBatang';
      src:url('fonts/GowunBatang-Bold.woff2?v=1') format('woff2'),
          url('fonts/GowunBatang-Bold.ttf?v=1') format('truetype');
      font-weight:700; font-style:normal; font-display:swap;
    }

    :root{
      --maxw:414px;
      --ink:#585353;
      --accent:#7b9155;
      --hint:#9d9b9b;
      --thin:#e5e5e5;
      --heart-gap:8px; /* 하트 아래 줄 간격 */
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0; background:#fff; color:var(--ink);
      font-family:'GowunBatang', ui-serif, system-ui, serif;
      font-size:12pt; line-height:1.8;
      display:flex; justify-content:center;
    }
    .container{width:100%; max-width:var(--maxw)}
    section{margin:0; background:#fff}
    .pad{padding:24px 16px}
    .center{text-align:center}
    .thin{height:1px; background:var(--thin); margin:16px 0}
    .thin-70{ width:70%; margin:16px auto; } /* 달력 앞뒤 얇은 선 */

    /* 이미지 공통 */
    img{display:block; height:auto;}
    img:not(.img-original){ width:100%; }
    .img-original{ display:block; width:auto !important; height:auto !important; margin:0 auto; }

    /* 시(가운데 정렬) */
    .poem{text-align:center}
    .poem p{margin:8px 0}
    .poem .big{font-size:14pt; color:#585353; font-weight:700}
    .poem .big.tight{ line-height:0.9; margin:4px 0; }
    .poem .big + .big{ margin-top:12px; } /* “13년 전,” ↔ “우리는 …” 사이 간격 벌림 */
    .poem .normal{font-size:12pt; color:#585353}
    .after-heart{ margin-top:var(--heart-gap)!important; } /* 하트 아래 간격 공통 */

    /* 아래→위 슬라이드 + 페이드 */
    @keyframes slideBySelfHeight{0%{transform:translateY(100%);opacity:0}100%{transform:translateY(0);opacity:1}}
    .reveal-up{transform:translateY(100%);opacity:0;will-change:transform,opacity}
    .reveal-up.show{animation:slideBySelfHeight 2s cubic-bezier(.2,.7,.2,1) forwards}
    @media (prefers-reduced-motion:reduce){.reveal-up{transform:none;opacity:1}.reveal-up.show{animation:none}}

    /* ===== 달력 ===== */
    .cal-title{
      font-family:'GowunBatang',serif; font-weight:700;
      font-size:16pt; color:#585353; text-align:center; margin:8px 0;
    }
    .cal-sub{ /* 2025년 11월 1일 오후 2시 */
      text-align:center; font-family:'GowunBatang',serif; font-weight:400;
      font-size:12pt; color:#585353; margin:4px 0 6px;
    }
    .cal-msg{ /* 날짜/시간 바로 아래 상태 문구 */
      text-align:center; font-family:'GowunBatang',serif; font-weight:400;
      font-size:12pt; color:#585353; margin:6px 0 10px;
    }
    .cal-msg .dleft{ color:var(--accent); font-weight:700; } /* N일 강조 색상 */

    .calendar{ width:70%; margin:0 auto; padding:0 4px; }
    .cal-head, .cal-grid{
      display:grid; grid-template-columns:repeat(7,1fr); gap:6px;
    }
    .cal-head div{
      text-align:center; font-size:12pt; color:#585353; letter-spacing:.04em; padding:4px 0;
    }
    .cal-cell{
      aspect-ratio:1/1; display:flex; align-items:center; justify-content:center;
      font-size:12pt; color:#585353;
    }
    .cal-cell .dot{
      display:inline-grid; place-items:center;
      width:28px; height:28px; border-radius:50%;
      background:#7b9155; color:#fff !important; font-weight:700;
    }
    @media (min-width:480px){
      .cal-cell .dot{ width:32px; height:32px; }
    }
    /* 일요일/토요일 색상 (1일은 .dot로 흰색 유지) */
    .cal-head div:nth-child(1){ color:#ff6b9c; }  /* 일 */
    .cal-head div:nth-child(7){ color:#6dafff; }  /* 토 */
    .cal-grid .cal-cell:nth-child(7n+1){ color:#ff6b9c; }
    .cal-grid .cal-cell:nth-child(7n){   color:#6dafff; }

    /* ===== 갤러리 ===== */
    .gallery{padding:16px}
    .gallery .section-title{font-weight:700; color:#585353; text-align:center; margin-bottom:8px}
    .hero-photo{position:relative; overflow:hidden}
    .hero-photo img{width:100%; display:block}
    .slide-nav{position:absolute; inset:auto 8px 8px auto; display:flex; gap:8px}
    .slide-nav button{border:1px solid #000; background:#000; color:#fff; padding:6px 10px; cursor:pointer}
    .thumbs{display:grid; grid-template-columns:repeat(4,1fr); gap:6px; margin-top:10px}
    .thumbs button{padding:0; border:1px solid var(--thin); aspect-ratio:1/1; overflow:hidden; cursor:pointer; background:#fff}
    .thumbs img{width:100%; height:100%; object-fit:cover; display:block}

    /* ===== 방명록 ===== */
    .gb-head{display:flex; justify-content:space-between; align-items:center; margin-bottom:10px}
    .gb-list{display:grid; gap:10px}
    .card{border:1px solid var(--thin); padding:12px}
    .pager{display:flex; gap:6px; align-items:center}
    .pager button{border:1px solid var(--thin); background:#fff; padding:6px 10px; cursor:pointer}
    .modal{position:fixed; inset:0; display:none; place-items:center; background:rgba(0,0,0,.45); z-index:100}
    .modal.open{display:grid}
    .sheet{background:#fff; border:1px solid var(--thin)}
    .sheet .hd{display:flex; justify-content:flex-end}
    .sheet .hd button{border:none; background:transparent; font-size:18px; padding:8px 10px; cursor:pointer}
    .sheet .body{padding:16px; display:grid; gap:10px}
    input, textarea{width:100%; padding:10px; border:1px solid var(--thin); font:inherit}

    /* ===== 마음 전하실 곳 ===== */
    .acc-title{
      font-size:16pt; font-family:'GowunBatang',serif; font-weight:700; color:#585353; text-align:center; margin-bottom:10px;
    }
    .acc-toggle{
      width:100%; border:1px solid var(--thin); border-radius:12px;
      background:#f1f1f1; color:#585353;
      font-family:'GowunBatang',serif; font-weight:400; font-size:12pt;
      padding:12px 14px;
      display:flex; align-items:center; justify-content:center; text-align:center; cursor:pointer;
    }
    .acc-panel{ display:none; margin-top:10px; }
    .acc-panel.open{ display:block; }
    .acc-table{ width:100%; border-collapse:separate; border-spacing:0; border:1px solid var(--thin); border-radius:12px; overflow:hidden; background:#fff; }
    .acc-table tbody td{ padding:10px; border-top:1px solid var(--thin); vertical-align:middle; }
    .acc-line{ font-size:10pt; color:#585353; }
    .copy-mini{
      font-family:'GowunBatang',serif; font-size:8pt;
      padding:6px 10px; border-radius:10px;
      background:transparent; color:#585353; border:1px solid var(--thin);
      cursor:pointer;
    }
    .copy-col{ width:80px; text-align:right; }

    /* 복사 완료 팝업(정사각 + 라운딩) */
    .copy-modal .sheet{
      width:260px; height:260px; border-radius:14px; display:grid; grid-template-rows:auto 1fr;
    }
    .copy-modal .body{
      display:grid; place-items:center;
      font-family:'GowunBatang',serif; font-weight:400; color:#585353;
    }

    /* ===== 공유 버튼 ===== */
    .share-box{ text-align:center; padding:20px 16px 40px; }
    .share-btn{
      font-family:'GowunBatang',serif; font-size:12pt; color:#585353;
      background:transparent; border:none; cursor:pointer;
    }
  </style>
</head>
<body>
  <main class="container">

    <!-- 상단 이미지들 -->
    <section><img src="images/1-photo.jpg?v=1" alt="상단 사진1"></section>
    <section><img src="images/2-typography.png?v=1" alt="타이포그래피"></section>

    <!-- 시 -->
    <section class="pad poem reveal-up" aria-label="시">
     <img src="images/heart.png" alt="하트" class="img-original">
      <div class="go-title after-heart">13년 전,<br>
      우리는 처음 만나 나무를 심었습니다.</div>

      <p class="normal" style="margin:30px 0 0 0;">
        여린 묘목에 흙과 물을 주고,<br>
        적당한 햇살이 비치기를,<br>
        적당한 바람이 불기를 바랐습니다.
      </p>

      <p class="normal" style="margin:30px 0 0 0;">
        맘과 달리 적당하지 않은 날이<br>
        많았는지도 모르겠습니다.
      </p>

      <p class="normal" style="margin:30px 0 0 0;">
        그 덕에 적당한 목질이 되어<br>
        이제는 제법 단단한 뿌리를 뻗고,<br>
        위로는 숱한 가지를 내어<br>
        그늘을 만들었습니다.
      </p>

      <p class="normal" style="margin:30px 0 0 0;">
        그 아래서 우리는<br>
        적당한 날들을 맞이하려 합니다.
      </p>
    </section>

    <section><img src="images/3-photo.png?v=1" alt="하단 사진"></section>

    <!-- 달력 -->
    <section class="pad reveal-up" aria-label="달력">
      <img src="images/heart.png" alt="하트" class="img-original">
      <div class="cal-title after-heart">결혼합니다</div>
      <div class="cal-sub">2025년 11월 1일 오후 2시</div>

      <!-- (변경) 상태 문구: 날짜 바로 아래 + 텍스트 교체 + 숫자 색 강조 -->
      <div id="weddingStatus" class="cal-msg">지선, 기환의 결혼식이 <span class="dleft">0</span>일 남았습니다.</div>

      <div class="thin thin-70"></div>

      <div class="calendar">
        <!-- 요일 헤더 (일~토) -->
        <div class="cal-head">
          <div>일</div><div>월</div><div>화</div><div>수</div><div>목</div><div>금</div><div>토</div>
        </div>

        <!-- 2025년 11월: 1일(토) → 앞 6칸 공백, 30일까지 -->
        <div class="cal-grid">
          <!-- 공백 6칸 -->
          <div class="cal-cell"></div><div class="cal-cell"></div><div class="cal-cell"></div>
          <div class="cal-cell"></div><div class="cal-cell"></div><div class="cal-cell"></div>

          <!-- 1일(토) 강조 -->
          <div class="cal-cell"><span class="dot">1</span></div>

          <!-- 2 ~ 8 -->
          <div class="cal-cell">2</div><div class="cal-cell">3</div><div class="cal-cell">4</div>
          <div class="cal-cell">5</div><div class="cal-cell">6</div><div class="cal-cell">7</div>
          <div class="cal-cell">8</div>

          <!-- 9 ~ 15 -->
          <div class="cal-cell">9</div><div class="cal-cell">10</div><div class="cal-cell">11</div>
          <div class="cal-cell">12</div><div class="cal-cell">13</div><div class="cal-cell">14</div>
          <div class="cal-cell">15</div>

          <!-- 16 ~ 22 -->
          <div class="cal-cell">16</div><div class="cal-cell">17</div><div class="cal-cell">18</div>
          <div class="cal-cell">19</div><div class="cal-cell">20</div><div class="cal-cell">21</div>
          <div class="cal-cell">22</div>

          <!-- 23 ~ 29 -->
          <div class="cal-cell">23</div><div class="cal-cell">24</div><div class="cal-cell">25</div>
          <div class="cal-cell">26</div><div class="cal-cell">27</div><div class="cal-cell">28</div>
          <div class="cal-cell">29</div>

          <!-- 30 (일) + 주 마감 공백 6칸 -->
          <div class="cal-cell">30</div>
          <div class="cal-cell"></div><div class="cal-cell"></div><div class="cal-cell"></div>
          <div class="cal-cell"></div><div class="cal-cell"></div><div class="cal-cell"></div>
        </div>
      </div>

      <div class="thin thin-70"></div>
    </section>

 <!-- 카운트(2줄·7칸 표) -->
    <section class="pad when reveal-up">
      <div class="title">우리가 나무를 심은 날</div>
      <div class="meta">2012. 06. 09. SAT. 08:30, 남산원</div>

      <table class="count-table" aria-label="경과 시간" id="pastTable">
        <colgroup>
          <col class="first"><col class="colon">
          <col class="val"><col class="colon">
          <col class="val"><col class="colon">
          <col class="val">
        </colgroup>
        <thead class="count-labels">
          <tr>
            <th>DAYS</th><th></th>
            <th>HOUR</th><th></th>
            <th>MIN</th><th></th>
            <th>SEC</th>
          </tr>
        </thead>
        <tbody class="count-values" id="countPastTbl">
          <tr>
            <td><span class="d">00</span></td><td class="colon">:</td>
            <td><span class="h">00</span></td><td class="colon">:</td>
            <td><span class="m">00</span></td><td class="colon">:</td>
            <td><span class="s">00</span></td>
          </tr>
        </tbody>
      </table>
    </section>

    <section class="pad when reveal-up">
      <div class="title">그 나무가 열매를 맺을 날</div>
      <div class="meta">2025. 11. 01. SAT. 14:00, 서울행정법원 융선당</div>

      <table class="count-table" aria-label="남은 시간" id="futureTable">
        <colgroup>
          <col class="first"><col class="colon">
          <col class="val"><col class="colon">
          <col class="val"><col class="colon">
          <col class="val">
        </colgroup>
        <thead class="count-labels">
          <tr>
            <th>DAYS</th><th></th>
            <th>HOUR</th><th></th>
            <th>MIN</th><th></th>
            <th>SEC</th>
          </tr>
        </thead>
        <tbody class="count-values" id="countFutureTbl">
          <tr>
            <td><span class="d">00</span></td><td class="colon">:</td>
            <td><span class="h">00</span></td><td class="colon">:</td>
            <td><span class="m">00</span></td><td class="colon">:</td>
            <td><span class="s">00</span></td>
          </tr>
        </tbody>
      </table>
    </section>

    <!-- 오시는 길 -->
    <section class="pad reveal-up">
      <img src="images/heart.png" alt="하트" class="img-original">
      <div class="go-title after-heart">오시는 길</div>

      <div class="map" style="margin-top:10px">
        <iframe
          title="서울가정행정법원 융선당"
          src="https://www.google.com/maps?q=%EC%84%9C%EC%9A%B8%EA%B0%80%EC%A0%95%ED%96%89%EC%A0%95%EB%B2%95%EC%9B%90%20%EC%9C%B5%EC%84%A0%EB%8B%B9&output=embed"
          loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>

      <div class="center" style="margin-top:12px">
        <div class="go-name">서울행정법원 융선당</div>
        <div class="go-addr">서울시 서초구 강남대로 193(양재동 25-3)</div>
        <div class="go-info" style="margin-top:10px">
          3호선 • 신분당선 양재역 9번 출구 도보 3분 직진<br>
          16시까지 지하 3~4층 주차장 이용 가능<br>
          13시 30분부터 식사 가능
        </div>
      </div>

      <div class="nav-apps">
        <a class="nav-btn" target="_blank" rel="noopener" href="https://map.naver.com/v5/search/%EC%84%9C%EC%9A%B8%ED%96%89%EC%A0%95%EB%B2%95%EC%9B%90%20%EC%9C%B5%EC%84%A0%EB%8B%B9%EC%98%88%EC%8B%9D%EC%9E%A5">네이버 지도</a>
        <a class="nav-btn" target="_blank" rel="noopener" href="https://tmap.life/143f765d">티맵</a>
        <a class="nav-btn" target="_blank" rel="noopener" href="https://kko.kakao.com/b6H0BkrBWS">카카오내비</a>
      </div>
    </section>

    <div class="thin"></div>

    <!-- 갤러리 -->
    <section class="gallery reveal-up" id="gallery">
      <div class="section-title">갤러리</div>
      <div class="hero-photo">
        <img id="heroImg" alt="큰 사진">
        <div class="slide-nav">
          <button id="prevBtn" aria-label="이전">이전</button>
          <button id="nextBtn" aria-label="다음">다음</button>
        </div>
      </div>
      <div class="thumbs" id="thumbs"></div>
    </section>

    <div class="thin"></div>

    <!-- 방명록 -->
    <section class="pad reveal-up" id="guestbook">
      <div class="gb-head">
        <div style="font-weight:700; color:#585353">방명록</div>
        <div class="pager">
          <button id="prevPage">이전</button>
          <span id="pageInfo">1 / 1</span>
          <button id="nextPage">다음</button>
          <button id="writeBtn" style="margin-left:8px">작성하기</button>
        </div>
      </div>
      <div id="gbList" class="gb-list"></div>
    </section>

    <!-- 방명록 작성 팝업 -->
    <div id="gbModal" class="modal">
      <div class="sheet" style="width:min(92vw,420px);">
        <div class="hd"><button id="gbClose" aria-label="닫기">✕</button></div>
        <div class="body">
          <input id="gbName" placeholder="이름"/>
          <textarea id="gbMsg" rows="4" placeholder="내용"></textarea>
          <button id="gbSubmit" class="nav-btn" style="justify-content:center">신랑 &amp; 신부에게 축하 글 전달하기</button>
        </div>
      </div>
    </div>

    <div class="thin"></div>

    <!-- 마음 전하실 곳 -->
    <section class="pad reveal-up" id="accounts">
      <div class="acc-title">마음 전하실 곳</div>

      <!-- 신랑 측 -->
      <button class="acc-toggle" type="button" aria-expanded="false" data-target="#accGroom">신랑 측</button>
      <div id="accGroom" class="acc-panel" hidden>
        <table class="acc-table" style="margin-top:10px">
          <tbody>
            <tr>
              <td class="acc-line">김기환 국민은행 90513110424</td>
              <td class="copy-col"><button class="copy-mini" data-copy="국민은행 90513110424 (김기환)">복사</button></td>
            </tr>
            <tr>
              <td class="acc-line">김정호 국민은행 430502-93-118573</td>
              <td class="copy-col"><button class="copy-mini" data-copy="국민은행 430502-93-118573 (김정호)">복사</button></td>
            </tr>
            <tr>
              <td class="acc-line">이이순 우리은행 1002-038-271451</td>
              <td class="copy-col"><button class="copy-mini" data-copy="우리은행 1002-038-271451 (이이순)">복사</button></td>
            </tr>
          </tbody>
        </table>
      </div>

      <div style="height:10px"></div>

      <!-- 신부 측 -->
      <button class="acc-toggle" type="button" aria-expanded="false" data-target="#accBride">신부 측</button>
      <div id="accBride" class="acc-panel" hidden>
        <table class="acc-table" style="margin-top:10px">
          <tbody>
            <tr>
              <td class="acc-line">목지선 카카오뱅크 3333-22-7850739</td>
              <td class="copy-col"><button class="copy-mini" data-copy="카카오뱅크 3333-22-7850739 (목지선)">복사</button></td>
            </tr>
            <tr>
              <td class="acc-line">목승우 국민은행 659401-01-191168</td>
              <td class="copy-col"><button class="copy-mini" data-copy="국민은행 659401-01-191168 (목승우)">복사</button></td>
            </tr>
            <tr>
              <td class="acc-line">성미화 새마을금고 9002197239365</td>
              <td class="copy-col"><button class="copy-mini" data-copy="새마을금고 9002197239365 (성미화)">복사</button></td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- 복사 완료 팝업(정사각) -->
    <div id="copyModal" class="modal copy-modal">
      <div class="sheet">
        <div class="hd"><button id="copyClose" aria-label="닫기">✕</button></div>
        <div class="body center">복사가 완료되었습니다.</div>
      </div>
    </div>

    <div class="thin"></div>

    <!-- 카카오톡 공유 버튼 -->
    <section class="share-box reveal-up">
      <button id="kakaoShare" class="share-btn">카카오톡으로 초대장 보내기</button>
    </section>

  </main>

  <script>
    /* 아래→위 슬라이드 트리거 */
    (function(){
      const REDUCED = matchMedia('(prefers-reduced-motion: reduce)').matches;
      const targets = Array.from(document.querySelectorAll('.reveal-up'));
      if (!targets.length) return;

      if (REDUCED) { targets.forEach(el => el.classList.add('show')); return; }

      let ticking = false;
      function onScrollOrResize(){
        if (ticking) return;
        ticking = true;
        requestAnimationFrame(() => {
          const vh = window.innerHeight || document.documentElement.clientHeight;
          targets.forEach(el => {
            if (el.classList.contains('show')) return;
            const r = el.getBoundingClientRect();
            const mid = r.top + r.height / 2;
            if (mid <= vh) { el.classList.add('show'); }
          });
          ticking = false;
        });
      }
      window.addEventListener('load', onScrollOrResize, { once:true });
      window.addEventListener('scroll', onScrollOrResize, { passive:true });
      window.addEventListener('resize', onScrollOrResize);
      onScrollOrResize();
    })();

    /* 날짜 카운트(2표) */
    document.addEventListener('DOMContentLoaded', function(){
      const pastTbody   = document.getElementById('countPastTbl');
      const futureTbody = document.getElementById('countFutureTbl');
      const pastTable   = document.getElementById('pastTable');
      const futureTable = document.getElementById('futureTable');
      if(!pastTbody || !futureTbody || !pastTable || !futureTable) return;

      const past   = new Date('2012-06-09T08:30:00+09:00');
      const future = new Date('2025-11-01T14:00:00+09:00');

      function fill(tbody, d,h,m,s){
        const dEl = tbody.querySelector('.d');
        const hEl = tbody.querySelector('.h');
        const mEl = tbody.querySelector('.m');
        const sEl = tbody.querySelector('.s');
        if(!dEl || !hEl || !mEl || !sEl) return;
        dEl.textContent = String(d).padStart(2,'0');
        hEl.textContent = String(h).padStart(2,'0');
        mEl.textContent = String(m).padStart(2,'0');
        sEl.textContent = String(s).padStart(2,'0');
      }
      function adjustFirstColWidth(tableEl, tbodyEl){
        const firstCol = tableEl.querySelector('colgroup col.first');
        const dSpan    = tbodyEl.querySelector('.d');
        if(!firstCol || !dSpan) return;
        const digitsLen = (dSpan.textContent || '').trim().length || 1;
        const widthCh   = Math.max(2, digitsLen + 1);
        firstCol.style.width = widthCh + 'ch';
      }
      function tick(){
        const now = new Date();

        let t1 = Math.max(0, now - past);
        const d1 = Math.floor(t1 / 86400000); t1 -= d1 * 86400000;
        const h1 = Math.floor(t1 / 3600000);  t1 -= h1 * 3600000;
        const m1 = Math.floor(t1 / 60000);    t1 -= m1 * 60000;
        const s1 = Math.floor(t1 / 1000);
        fill(pastTbody, d1,h1,m1,s1);
        adjustFirstColWidth(pastTable, pastTbody);

        let t2 = Math.max(0, future - now);
        const d2 = Math.floor(t2 / 86400000); t2 -= d2 * 86400000;
        const h2 = Math.floor(t2 / 3600000);  t2 -= h2 * 3600000;
        const m2 = Math.floor(t2 / 60000);    t2 -= m2 * 60000;
        const s2 = Math.floor(t2 / 1000);
        fill(futureTbody, d2,h2,m2,s2);
        adjustFirstColWidth(futureTable, futureTbody);
      }
      tick();
      setInterval(tick, 1000);
    });

    /* 달력 상태 문구: 남은/당일/지난 날 계산(기준일: 2025-11-01, 자정 기준) */
    (function(){
      const el = document.getElementById('weddingStatus');
      if(!el) return;
      function updateStatus(){
        const now = new Date();
        const weddingDate = new Date('2025-11-01T00:00:00+09:00'); // 기준일 자정(KST)
        const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
        const msPerDay = 86400000;

        const diff = today - weddingDate; // 양수: 지난 날
        if (diff < 0){
          const daysLeft = Math.ceil((weddingDate - today)/msPerDay);
          el.innerHTML = `지선, 기환의 결혼식이 <span class="dleft">${daysLeft}</span>일 남았습니다.`;
        } else if (diff === 0){
          el.textContent = `지선, 기환의 결혼식이 열리는 날입니다.`;
        } else {
          const daysSince = Math.floor(diff/msPerDay);
          el.innerHTML = `지선, 기환이 결혼한 지 <span class="dleft">${daysSince}</span>일 되는 날입니다.`;
        }
      }
      updateStatus();
      setInterval(updateStatus, 3600000); // 1시간마다 갱신
    })();

    /* 갤러리(간단 랜덤/슬라이드 준비) */
    (function(){
      const hero=document.getElementById('heroImg');
      const thumbs=document.getElementById('thumbs');
      const prev=document.getElementById('prevBtn');
      const next=document.getElementById('nextBtn');
      if(!hero||!thumbs||!prev||!next) return;

      const ALL=[
        // 'images/p1.jpg','images/p2.jpg','images/p3.jpg','images/p4.jpg' ...
      ];
      function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a}
      const list=ALL.slice(); // 필요 시 shuffle(list)
      let idx=0;
      function show(i){
        if(!list.length){ hero.alt='이미지 준비중'; return; }
        idx=(i+list.length)%list.length; hero.src=list[idx]+'?v=1';
      }
      show(0);
      prev.addEventListener('click',()=>show(idx-1));
      next.addEventListener('click',()=>show(idx+1));
      list.forEach((src,i)=>{
        const b=document.createElement('button');
        const im=document.createElement('img');
        im.src=src+'?v=1'; im.alt='썸네일'; b.appendChild(im);
        b.addEventListener('click',()=>show(i));
        thumbs.appendChild(b);
      });
    })();

    /* 방명록 (로컬 스텁) */
    (function(){
      const listEl=document.getElementById('gbList');
      const btnWrite=document.getElementById('writeBtn');
      const modal=document.getElementById('gbModal');
      const close=document.getElementById('gbClose');
      const submit=document.getElementById('gbSubmit');
      const nameEl=document.getElementById('gbName');
      const msgEl=document.getElementById('gbMsg');
      const pageInfo=document.getElementById('pageInfo');
      const prev=document.getElementById('prevPage');
      const next=document.getElementById('nextPage');

      if(!listEl) return;

      let data=JSON.parse(localStorage.getItem('gb_data')||'[]');
      const pageSize=5; let page=1;

      function render(){
        const total=Math.max(1, Math.ceil(data.length/pageSize));
        page=Math.min(Math.max(1,page), total);
        pageInfo.textContent=`${page} / ${total}`;
        listEl.innerHTML='';
        const start=(page-1)*pageSize;
        data.slice(start, start+pageSize).forEach(item=>{
          const card=document.createElement('div');
          card.className='card';
          card.innerHTML=`<div style="font-weight:700">${item.name}</div>
                          <div style="font-size:10pt; color:#777">${item.date}</div>
                          <div style="margin-top:6px">${item.msg.replace(/\n/g,'<br>')}</div>`;
          listEl.appendChild(card);
        });
      }
      render();

      btnWrite.addEventListener('click',()=>{ modal.classList.add('open'); });
      close.addEventListener('click',()=> modal.classList.remove('open'));
      prev.addEventListener('click',()=>{ page--; render(); });
      next.addEventListener('click',()=>{ page++; render(); });
      submit.addEventListener('click',()=>{
        const name=nameEl.value.trim(); const msg=msgEl.value.trim();
        if(!name || !msg) return alert('이름과 내용을 입력해주세요.');
        const date=new Date().toLocaleDateString('ko-KR');
        data=[{name, msg, date}, ...data];
        localStorage.setItem('gb_data', JSON.stringify(data));
        nameEl.value=''; msgEl.value=''; modal.classList.remove('open'); render();
      });
    })();

    /* 마음 전하실 곳: 토글 + 복사 팝업 */
    (function(){
      // 토글
      document.querySelectorAll('.acc-toggle').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const sel=btn.getAttribute('data-target');
          const panel=document.querySelector(sel);
          const open=btn.getAttribute('aria-expanded')==='true';
          btn.setAttribute('aria-expanded', String(!open));
          if(open){ panel.classList.remove('open'); panel.hidden=true; }
          else { panel.hidden=false; panel.classList.add('open'); }
        });
      });

      // 복사
      const copyModal=document.getElementById('copyModal');
      const copyClose=document.getElementById('copyClose');
      if(copyClose) copyClose.addEventListener('click',()=>copyModal.classList.remove('open'));

      document.addEventListener('click', (e)=>{
        const b=e.target.closest('.copy-mini');
        if(!b) return;
        const txt=b.getAttribute('data-copy')||'';
        if(navigator.clipboard){
          navigator.clipboard.writeText(txt).then(()=>copyModal.classList.add('open'));
        }else{
          const ta=document.createElement('textarea'); ta.value=txt; document.body.appendChild(ta);
          ta.select(); document.execCommand('copy'); document.body.removeChild(ta);
          copyModal.classList.add('open');
        }
      });
    })();

    /* 공유 */
    (function(){
      const btn=document.getElementById('kakaoShare');
      if(!btn) return;
      btn.addEventListener('click', ()=>{
        const data={ title:document.title, text:'초대합니다', url:location.href };
        if(navigator.share){ navigator.share(data); }
        else { navigator.clipboard.writeText(location.href); alert('링크가 복사되었습니다. 카카오톡에 붙여넣어 보내주세요.'); }
      });
    })();
  </script>
</body>
</html>
